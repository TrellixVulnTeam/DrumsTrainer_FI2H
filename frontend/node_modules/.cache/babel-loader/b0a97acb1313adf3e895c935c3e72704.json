{"ast":null,"code":"var supportsAudio = require('./supports-audio');\n\nvar registerAudioContext = require('./register-audio-context');\n\nvar activeAudioContext = require('./active-audio-context');\n\nvar parseCommon = require('../parse/abc_common'); // TODO-PER: The require statements for svg don't play well for node apps without extra plugins. The following lines would be clearer than inlining the SVG\n// var loopImage = require('./images/loop.svg');\n// var playImage = require('./images/play.svg');\n// var pauseImage = require('./images/pause.svg');\n// var loadingImage = require('./images/loading.svg');\n// var resetImage = require('./images/reset.svg');\n\n\nvar loopImage = '<svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 700 700\" preserveAspectRatio=\"xMidYMid meet\">\\n' + '<g transform=\"translate(0,700) scale(0.1,-0.1)\" >\\n' + '<path d=\"M3111 6981 c-20 -37 -90 -55 -364 -96 -120 -18 -190 -33 -244 -55 ' + '-42 -17 -124 -42 -182 -56 -78 -18 -119 -34 -157 -60 -28 -19 -86 -46 -128 ' + '-60 -43 -13 -107 -42 -144 -64 -37 -23 -84 -46 -106 -52 -21 -7 -56 -29 -79 ' + '-50 -22 -22 -61 -50 -86 -63 -26 -13 -67 -40 -91 -60 -24 -20 -65 -47 -90 -60 ' + '-25 -13 -53 -31 -61 -41 -8 -9 -32 -30 -54 -46 -75 -54 -486 -460 -512 -507 ' + '-15 -25 -48 -69 -75 -98 -26 -28 -48 -57 -48 -63 0 -6 -18 -29 -39 -53 -21 ' + '-23 -56 -71 -77 -107 -20 -36 -50 -80 -65 -97 -16 -18 -33 -52 -40 -75 -12 ' + '-47 -47 -115 -84 -166 -13 -18 -30 -56 -38 -83 -8 -27 -34 -80 -56 -118 -33 ' + '-53 -46 -91 -62 -167 -12 -63 -34 -127 -59 -179 -42 -84 -60 -166 -60 -270 0 ' + '-90 26 -122 125 -154 54 -17 96 -19 430 -20 305 -1 381 2 430 14 82 22 140 51 ' + '153 78 6 12 22 47 37 77 14 30 38 77 54 103 15 27 34 73 40 103 7 30 28 78 48 ' + '107 19 28 44 74 55 101 10 28 34 67 53 87 18 20 49 61 68 90 19 30 44 63 57 ' + '74 13 11 36 40 52 65 59 94 232 270 306 313 20 11 57 37 82 58 25 20 70 52 ' + '100 72 30 19 66 47 79 61 13 14 49 35 80 46 30 12 80 37 111 56 31 19 95 45 ' + '143 58 48 12 110 37 139 55 63 40 127 55 323 76 83 9 208 28 279 41 156 29 ' + '165 29 330 4 453 -71 514 -84 606 -130 31 -16 83 -36 116 -45 32 -9 84 -34 ' + '115 -56 31 -21 82 -48 113 -60 32 -11 72 -33 89 -48 18 -16 59 -45 92 -65 33 ' + '-21 74 -51 90 -66 17 -15 49 -40 73 -54 52 -32 65 -61 50 -113 -8 -31 -61 -90 ' + '-277 -308 -300 -303 -361 -382 -369 -481 -2 -29 0 -66 6 -81 13 -40 88 -138 ' + '115 -151 12 -6 54 -26 92 -44 l70 -33 945 -2 c520 -1 975 2 1012 7 64 8 191 ' + '50 231 76 11 7 33 34 50 60 22 34 42 51 65 58 l32 9 0 1101 0 1102 -32 9 c-21 ' + '7 -44 26 -64 55 -60 84 -77 97 -140 110 -44 9 -76 10 -127 2 -59 -9 -77 -17 ' + '-134 -62 -37 -28 -172 -155 -301 -281 -129 -127 -249 -237 -267 -245 -25 -10 ' + '-41 -11 -71 -2 -58 15 -112 45 -124 69 -6 11 -35 35 -64 54 -28 18 -58 41 -66 ' + '50 -8 9 -41 35 -75 58 -33 22 -77 56 -99 75 -21 18 -64 46 -95 61 -31 14 -73 ' + '39 -93 55 -20 15 -70 40 -110 55 -40 15 -97 44 -127 64 -29 21 -78 44 -107 53 ' + '-30 8 -77 31 -105 51 -42 28 -73 39 -173 60 -68 14 -154 39 -196 58 -95 43 ' + '-131 51 -343 76 -209 24 -242 32 -279 70 l-30 29 -328 0 c-312 0 -330 -1 -339 ' + '-19z\"></path>\\n' + '<path d=\"M254 2875 c-89 -16 -107 -26 -145 -78 -32 -44 -62 -66 -91 -67 -17 0 ' + '-18 -61 -18 -1140 l0 -1140 24 0 c16 0 41 -17 72 -50 40 -42 61 -55 117 -72 ' + 'l69 -21 82 23 c44 12 96 30 114 39 18 9 148 132 290 272 141 141 267 261 279 ' + '268 51 26 86 14 176 -61 32 -26 62 -48 66 -48 5 0 36 -25 70 -55 34 -30 74 ' + '-61 89 -69 15 -8 37 -28 50 -45 12 -17 50 -45 84 -62 34 -17 78 -44 98 -60 19 ' + '-16 61 -37 93 -48 32 -11 81 -37 107 -56 27 -20 76 -45 109 -56 33 -12 75 -31 ' + '93 -44 62 -45 93 -58 191 -82 54 -12 130 -37 168 -54 68 -29 180 -58 226 -59 ' + '62 0 183 -64 183 -96 0 -12 88 -14 639 -14 l639 0 12 30 c18 44 76 66 233 89 ' + '89 14 160 30 200 47 34 15 106 42 159 60 54 18 112 44 130 57 47 35 85 52 146 ' + '67 29 7 76 28 105 48 29 20 77 48 107 63 30 15 66 39 80 54 14 15 50 40 81 56 ' + '31 15 78 46 104 69 26 22 61 46 79 54 17 7 43 26 56 42 14 16 41 41 60 56 64 ' + '48 380 362 408 405 15 23 40 51 55 63 15 12 36 38 46 58 11 21 37 57 58 82 22 ' + '25 49 62 62 83 13 20 38 56 57 78 19 23 50 74 69 113 19 39 46 86 59 104 14 ' + '18 34 62 46 98 12 36 32 77 45 92 31 38 60 97 80 167 9 33 26 76 37 95 29 50 ' + '47 103 68 206 10 52 32 117 51 155 29 56 33 74 34 140 0 94 -10 108 -101 138 ' + '-61 20 -83 21 -463 21 -226 0 -421 -4 -451 -10 -63 -12 -86 -30 -110 -85 -10 ' + '-22 -33 -63 -52 -92 -21 -31 -42 -80 -53 -123 -11 -44 -32 -93 -56 -128 -20 ' + '-32 -47 -83 -59 -115 -12 -32 -37 -77 -56 -100 -19 -23 -50 -65 -69 -94 -19 ' + '-29 -44 -57 -54 -63 -11 -5 -29 -27 -42 -47 -52 -85 -234 -277 -300 -315 -25 ' + '-15 -53 -38 -62 -51 -9 -14 -42 -39 -74 -57 -32 -18 -75 -48 -95 -66 -21 -18 ' + '-59 -44 -85 -58 -26 -13 -72 -40 -100 -59 -35 -24 -78 -41 -128 -52 -47 -11 ' + '-99 -31 -139 -56 -69 -42 -94 -49 -391 -110 -245 -51 -425 -66 -595 -50 -168 ' + '16 -230 27 -330 61 -47 16 -123 35 -170 44 -98 17 -123 25 -172 58 -20 14 -71 ' + '37 -114 53 -44 15 -95 40 -115 56 -20 16 -70 42 -110 59 -40 16 -88 45 -108 ' + '63 -20 19 -55 46 -78 61 -24 14 -49 35 -55 47 -7 11 -34 33 -60 49 -50 31 -65 ' + '61 -53 102 4 13 130 147 281 298 236 238 277 283 299 335 15 32 35 71 46 86 ' + '12 18 19 44 19 76 0 42 -8 63 -53 138 -92 151 11 139 -1207 141 -798 2 -1030 ' + '0 -1086 -11z\"></path>\\n' + '</g>\\n' + '</svg>\\n';\nvar playImage = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 25\" class=\"abcjs-play-svg\">\\n' + '    <g>\\n' + '    <polygon points=\"4 0 23 12.5 4 25\"/>\\n' + '    </g>\\n' + '</svg>';\nvar pauseImage = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 25\" class=\"abcjs-pause-svg\">\\n' + '  <g>\\n' + '    <rect width=\"8.23\" height=\"25\"/>\\n' + '    <rect width=\"8.23\" height=\"25\" x=\"17\"/>\\n' + '  </g>\\n' + '</svg>';\nvar loadingImage = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\" class=\"abcjs-loading-svg\">\\n' + '    <circle cx=\"50\" cy=\"50\" fill=\"none\" stroke-width=\"20\" r=\"35\" stroke-dasharray=\"160 55\"></circle>\\n' + '</svg>';\nvar resetImage = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 25\">\\n' + '  <g>\\n' + '    <polygon points=\"5 12.5 24 0 24 25\"/>\\n' + '    <rect width=\"3\" height=\"25\" x=\"0\" y=\"0\"/>\\n' + '  </g>\\n' + '</svg>';\n\nfunction CreateSynthControl(parent, options) {\n  var self = this; // parent is either an element or a selector.\n\n  if (typeof parent === \"string\") {\n    var selector = parent;\n    parent = document.querySelector(selector);\n    if (!parent) throw new Error(\"Cannot find element \\\"\" + selector + \"\\\" in the DOM.\");\n  } else if (!(parent instanceof HTMLElement)) throw new Error(\"The first parameter must be a valid element or selector in the DOM.\");\n\n  self.parent = parent;\n  self.options = {};\n  if (options) self.options = parseCommon.clone(options); // This can be called in the following cases:\n  // AC already registered and not suspended\n  // AC already registered and suspended\n  // AC not registered and not passed in\n  // AC not registered but passed in (but suspended)\n  // AC not registered but passed in (not suspended)\n  // If the AC is already registered, then just use it - ignore what is passed in\n  // Create the AC if necessary if there isn't one already.\n  // We don't care right now if the AC is suspended - whenever a button is clicked then we check it.\n\n  if (self.options.ac) registerAudioContext(self.options.ac);\n  buildDom(self.parent, self.options);\n  attachListeners(self);\n\n  self.setTempo = function (tempo) {\n    var el = self.parent.querySelector(\".abcjs-midi-current-tempo\");\n    if (el) el.innerHTML = tempo;\n  };\n\n  self.resetAll = function () {\n    var pushedButtons = self.parent.querySelectorAll(\".abcjs-pushed\");\n\n    for (var i = 0; i < pushedButtons.length; i++) {\n      var button = pushedButtons[i];\n      button.classList.remove(\"abcjs-pushed\");\n    }\n  };\n\n  self.pushPlay = function (push) {\n    var startButton = self.parent.querySelector(\".abcjs-midi-start\");\n    if (!startButton) return;\n    if (push) startButton.classList.add(\"abcjs-pushed\");else startButton.classList.remove(\"abcjs-pushed\");\n  };\n\n  self.pushLoop = function (push) {\n    var loopButton = self.parent.querySelector(\".abcjs-midi-loop\");\n    if (!loopButton) return;\n    if (push) loopButton.classList.add(\"abcjs-pushed\");else loopButton.classList.remove(\"abcjs-pushed\");\n  };\n\n  self.setProgress = function (percent, totalTime) {\n    var progressBackground = self.parent.querySelector(\".abcjs-midi-progress-background\");\n    var progressThumb = self.parent.querySelector(\".abcjs-midi-progress-indicator\");\n    if (!progressBackground || !progressThumb) return;\n    var width = progressBackground.clientWidth;\n    var left = width * percent;\n    progressThumb.style.left = left + \"px\";\n    var clock = self.parent.querySelector(\".abcjs-midi-clock\");\n\n    if (clock) {\n      var totalSeconds = totalTime * percent / 1000;\n      var minutes = Math.floor(totalSeconds / 60);\n      var seconds = Math.floor(totalSeconds % 60);\n      var secondsFormatted = seconds < 10 ? \"0\" + seconds : seconds;\n      clock.innerHTML = minutes + \":\" + secondsFormatted;\n    }\n  };\n\n  if (self.options.afterResume) {\n    var isResumed = false;\n\n    if (self.options.ac) {\n      isResumed = self.options.ac.state !== \"suspended\";\n    } else if (activeAudioContext()) {\n      isResumed = activeAudioContext().state !== \"suspended\";\n    }\n\n    if (isResumed) self.options.afterResume();\n  }\n}\n\nfunction buildDom(parent, options) {\n  var hasLoop = !!options.loopHandler;\n  var hasRestart = !!options.restartHandler;\n  var hasPlay = !!options.playHandler || !!options.playPromiseHandler;\n  var hasProgress = !!options.progressHandler;\n  var hasWarp = !!options.warpHandler;\n  var hasClock = options.hasClock !== false;\n  var html = '<div class=\"abcjs-inline-audio\">\\n';\n\n  if (hasLoop) {\n    var repeatTitle = options.repeatTitle ? options.repeatTitle : \"Click to toggle play once/repeat.\";\n    var repeatAria = options.repeatAria ? options.repeatAria : repeatTitle;\n    html += '<button type=\"button\" class=\"abcjs-midi-loop abcjs-btn\" title=\"' + repeatTitle + '\" aria-label=\"' + repeatAria + '\">' + loopImage + '</button>\\n';\n  }\n\n  if (hasRestart) {\n    var restartTitle = options.restartTitle ? options.restartTitle : \"Click to go to beginning.\";\n    var restartAria = options.restartAria ? options.restartAria : restartTitle;\n    html += '<button type=\"button\" class=\"abcjs-midi-reset abcjs-btn\" title=\"' + restartTitle + '\" aria-label=\"' + restartAria + '\">' + resetImage + '</button>\\n';\n  }\n\n  if (hasPlay) {\n    var playTitle = options.playTitle ? options.playTitle : \"Click to play/pause.\";\n    var playAria = options.playAria ? options.playAria : playTitle;\n    html += '<button type=\"button\" class=\"abcjs-midi-start abcjs-btn\" title=\"' + playTitle + '\" aria-label=\"' + playAria + '\">' + playImage + pauseImage + loadingImage + '</button>\\n';\n  }\n\n  if (hasProgress) {\n    var randomTitle = options.randomTitle ? options.randomTitle : \"Click to change the playback position.\";\n    var randomAria = options.randomAria ? options.randomAria : randomTitle;\n    html += '<button type=\"button\" class=\"abcjs-midi-progress-background\" title=\"' + randomTitle + '\" aria-label=\"' + randomAria + '\"><span class=\"abcjs-midi-progress-indicator\"></span></button>\\n';\n  }\n\n  if (hasClock) {\n    html += '<span class=\"abcjs-midi-clock\"></span>\\n';\n  }\n\n  if (hasWarp) {\n    var warpTitle = options.warpTitle ? options.warpTitle : \"Change the playback speed.\";\n    var warpAria = options.warpAria ? options.warpAria : warpTitle;\n    var bpm = options.bpm ? options.bpm : \"BPM\";\n    html += '<span class=\"abcjs-tempo-wrapper\"><label><input class=\"abcjs-midi-tempo\" type=\"number\" min=\"1\" max=\"300\" value=\"100\" title=\"' + warpTitle + '\" aria-label=\"' + warpAria + '\">%</label><span>&nbsp;(<span class=\"abcjs-midi-current-tempo\"></span> ' + bpm + ')</span></span>\\n';\n  }\n\n  html += '</div>\\n';\n  parent.innerHTML = html;\n}\n\nfunction acResumerMiddleWare(next, ev, playBtn, afterResume, isPromise) {\n  var needsInit = true;\n\n  if (!activeAudioContext()) {\n    registerAudioContext();\n  } else {\n    needsInit = activeAudioContext().state === \"suspended\";\n  }\n\n  if (!supportsAudio()) {\n    throw {\n      status: \"NotSupported\",\n      message: \"This browser does not support audio.\"\n    };\n  }\n\n  if ((needsInit || isPromise) && playBtn) playBtn.classList.add(\"abcjs-loading\");\n\n  if (needsInit) {\n    activeAudioContext().resume().then(function () {\n      if (afterResume) {\n        afterResume().then(function (response) {\n          doNext(next, ev, playBtn, isPromise);\n        });\n      } else {\n        doNext(next, ev, playBtn, isPromise);\n      }\n    });\n  } else {\n    doNext(next, ev, playBtn, isPromise);\n  }\n}\n\nfunction doNext(next, ev, playBtn, isPromise) {\n  if (isPromise) {\n    next(ev).then(function () {\n      if (playBtn) playBtn.classList.remove(\"abcjs-loading\");\n    });\n  } else {\n    next(ev);\n    if (playBtn) playBtn.classList.remove(\"abcjs-loading\");\n  }\n}\n\nfunction attachListeners(self) {\n  var hasLoop = !!self.options.loopHandler;\n  var hasRestart = !!self.options.restartHandler;\n  var hasPlay = !!self.options.playHandler || !!self.options.playPromiseHandler;\n  var hasProgress = !!self.options.progressHandler;\n  var hasWarp = !!self.options.warpHandler;\n  var playBtn = self.parent.querySelector(\".abcjs-midi-start\");\n  if (hasLoop) self.parent.querySelector(\".abcjs-midi-loop\").addEventListener(\"click\", function (ev) {\n    acResumerMiddleWare(self.options.loopHandler, ev, playBtn, self.options.afterResume);\n  });\n  if (hasRestart) self.parent.querySelector(\".abcjs-midi-reset\").addEventListener(\"click\", function (ev) {\n    acResumerMiddleWare(self.options.restartHandler, ev, playBtn, self.options.afterResume);\n  });\n  if (hasPlay) playBtn.addEventListener(\"click\", function (ev) {\n    acResumerMiddleWare(self.options.playPromiseHandler || self.options.playHandler, ev, playBtn, self.options.afterResume, !!self.options.playPromiseHandler);\n  });\n  if (hasProgress) self.parent.querySelector(\".abcjs-midi-progress-background\").addEventListener(\"click\", function (ev) {\n    acResumerMiddleWare(self.options.progressHandler, ev, playBtn, self.options.afterResume);\n  });\n  if (hasWarp) self.parent.querySelector(\".abcjs-midi-tempo\").addEventListener(\"change\", function (ev) {\n    acResumerMiddleWare(self.options.warpHandler, ev, playBtn, self.options.afterResume);\n  });\n}\n\nmodule.exports = CreateSynthControl;","map":{"version":3,"sources":["/home/elad/Desktop/Repos/drums-trainer/frontend/node_modules/react-sheet-music/node_modules/abcjs/src/synth/create-synth-control.js"],"names":["supportsAudio","require","registerAudioContext","activeAudioContext","parseCommon","loopImage","playImage","pauseImage","loadingImage","resetImage","CreateSynthControl","parent","options","self","selector","document","querySelector","Error","HTMLElement","clone","ac","buildDom","attachListeners","setTempo","tempo","el","innerHTML","resetAll","pushedButtons","querySelectorAll","i","length","button","classList","remove","pushPlay","push","startButton","add","pushLoop","loopButton","setProgress","percent","totalTime","progressBackground","progressThumb","width","clientWidth","left","style","clock","totalSeconds","minutes","Math","floor","seconds","secondsFormatted","afterResume","isResumed","state","hasLoop","loopHandler","hasRestart","restartHandler","hasPlay","playHandler","playPromiseHandler","hasProgress","progressHandler","hasWarp","warpHandler","hasClock","html","repeatTitle","repeatAria","restartTitle","restartAria","playTitle","playAria","randomTitle","randomAria","warpTitle","warpAria","bpm","acResumerMiddleWare","next","ev","playBtn","isPromise","needsInit","status","message","resume","then","response","doNext","addEventListener","module","exports"],"mappings":"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","sourcesContent":["var supportsAudio = require('./supports-audio');\nvar registerAudioContext = require('./register-audio-context');\nvar activeAudioContext = require('./active-audio-context');\nvar parseCommon = require('../parse/abc_common');\n// TODO-PER: The require statements for svg don't play well for node apps without extra plugins. The following lines would be clearer than inlining the SVG\n// var loopImage = require('./images/loop.svg');\n// var playImage = require('./images/play.svg');\n// var pauseImage = require('./images/pause.svg');\n// var loadingImage = require('./images/loading.svg');\n// var resetImage = require('./images/reset.svg');\nvar loopImage = '<svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 700 700\" preserveAspectRatio=\"xMidYMid meet\">\\n' +\n\t'<g transform=\"translate(0,700) scale(0.1,-0.1)\" >\\n' +\n\t'<path d=\"M3111 6981 c-20 -37 -90 -55 -364 -96 -120 -18 -190 -33 -244 -55 ' +\n\t'-42 -17 -124 -42 -182 -56 -78 -18 -119 -34 -157 -60 -28 -19 -86 -46 -128 ' +\n\t'-60 -43 -13 -107 -42 -144 -64 -37 -23 -84 -46 -106 -52 -21 -7 -56 -29 -79 ' +\n\t'-50 -22 -22 -61 -50 -86 -63 -26 -13 -67 -40 -91 -60 -24 -20 -65 -47 -90 -60 ' +\n\t'-25 -13 -53 -31 -61 -41 -8 -9 -32 -30 -54 -46 -75 -54 -486 -460 -512 -507 ' +\n\t'-15 -25 -48 -69 -75 -98 -26 -28 -48 -57 -48 -63 0 -6 -18 -29 -39 -53 -21 ' +\n\t'-23 -56 -71 -77 -107 -20 -36 -50 -80 -65 -97 -16 -18 -33 -52 -40 -75 -12 ' +\n\t'-47 -47 -115 -84 -166 -13 -18 -30 -56 -38 -83 -8 -27 -34 -80 -56 -118 -33 ' +\n\t'-53 -46 -91 -62 -167 -12 -63 -34 -127 -59 -179 -42 -84 -60 -166 -60 -270 0 ' +\n\t'-90 26 -122 125 -154 54 -17 96 -19 430 -20 305 -1 381 2 430 14 82 22 140 51 ' +\n\t'153 78 6 12 22 47 37 77 14 30 38 77 54 103 15 27 34 73 40 103 7 30 28 78 48 ' +\n\t'107 19 28 44 74 55 101 10 28 34 67 53 87 18 20 49 61 68 90 19 30 44 63 57 ' +\n\t'74 13 11 36 40 52 65 59 94 232 270 306 313 20 11 57 37 82 58 25 20 70 52 ' +\n\t'100 72 30 19 66 47 79 61 13 14 49 35 80 46 30 12 80 37 111 56 31 19 95 45 ' +\n\t'143 58 48 12 110 37 139 55 63 40 127 55 323 76 83 9 208 28 279 41 156 29 ' +\n\t'165 29 330 4 453 -71 514 -84 606 -130 31 -16 83 -36 116 -45 32 -9 84 -34 ' +\n\t'115 -56 31 -21 82 -48 113 -60 32 -11 72 -33 89 -48 18 -16 59 -45 92 -65 33 ' +\n\t'-21 74 -51 90 -66 17 -15 49 -40 73 -54 52 -32 65 -61 50 -113 -8 -31 -61 -90 ' +\n\t'-277 -308 -300 -303 -361 -382 -369 -481 -2 -29 0 -66 6 -81 13 -40 88 -138 ' +\n\t'115 -151 12 -6 54 -26 92 -44 l70 -33 945 -2 c520 -1 975 2 1012 7 64 8 191 ' +\n\t'50 231 76 11 7 33 34 50 60 22 34 42 51 65 58 l32 9 0 1101 0 1102 -32 9 c-21 ' +\n\t'7 -44 26 -64 55 -60 84 -77 97 -140 110 -44 9 -76 10 -127 2 -59 -9 -77 -17 ' +\n\t'-134 -62 -37 -28 -172 -155 -301 -281 -129 -127 -249 -237 -267 -245 -25 -10 ' +\n\t'-41 -11 -71 -2 -58 15 -112 45 -124 69 -6 11 -35 35 -64 54 -28 18 -58 41 -66 ' +\n\t'50 -8 9 -41 35 -75 58 -33 22 -77 56 -99 75 -21 18 -64 46 -95 61 -31 14 -73 ' +\n\t'39 -93 55 -20 15 -70 40 -110 55 -40 15 -97 44 -127 64 -29 21 -78 44 -107 53 ' +\n\t'-30 8 -77 31 -105 51 -42 28 -73 39 -173 60 -68 14 -154 39 -196 58 -95 43 ' +\n\t'-131 51 -343 76 -209 24 -242 32 -279 70 l-30 29 -328 0 c-312 0 -330 -1 -339 ' +\n\t'-19z\"></path>\\n' +\n\t'<path d=\"M254 2875 c-89 -16 -107 -26 -145 -78 -32 -44 -62 -66 -91 -67 -17 0 ' +\n\t'-18 -61 -18 -1140 l0 -1140 24 0 c16 0 41 -17 72 -50 40 -42 61 -55 117 -72 ' +\n\t'l69 -21 82 23 c44 12 96 30 114 39 18 9 148 132 290 272 141 141 267 261 279 ' +\n\t'268 51 26 86 14 176 -61 32 -26 62 -48 66 -48 5 0 36 -25 70 -55 34 -30 74 ' +\n\t'-61 89 -69 15 -8 37 -28 50 -45 12 -17 50 -45 84 -62 34 -17 78 -44 98 -60 19 ' +\n\t'-16 61 -37 93 -48 32 -11 81 -37 107 -56 27 -20 76 -45 109 -56 33 -12 75 -31 ' +\n\t'93 -44 62 -45 93 -58 191 -82 54 -12 130 -37 168 -54 68 -29 180 -58 226 -59 ' +\n\t'62 0 183 -64 183 -96 0 -12 88 -14 639 -14 l639 0 12 30 c18 44 76 66 233 89 ' +\n\t'89 14 160 30 200 47 34 15 106 42 159 60 54 18 112 44 130 57 47 35 85 52 146 ' +\n\t'67 29 7 76 28 105 48 29 20 77 48 107 63 30 15 66 39 80 54 14 15 50 40 81 56 ' +\n\t'31 15 78 46 104 69 26 22 61 46 79 54 17 7 43 26 56 42 14 16 41 41 60 56 64 ' +\n\t'48 380 362 408 405 15 23 40 51 55 63 15 12 36 38 46 58 11 21 37 57 58 82 22 ' +\n\t'25 49 62 62 83 13 20 38 56 57 78 19 23 50 74 69 113 19 39 46 86 59 104 14 ' +\n\t'18 34 62 46 98 12 36 32 77 45 92 31 38 60 97 80 167 9 33 26 76 37 95 29 50 ' +\n\t'47 103 68 206 10 52 32 117 51 155 29 56 33 74 34 140 0 94 -10 108 -101 138 ' +\n\t'-61 20 -83 21 -463 21 -226 0 -421 -4 -451 -10 -63 -12 -86 -30 -110 -85 -10 ' +\n\t'-22 -33 -63 -52 -92 -21 -31 -42 -80 -53 -123 -11 -44 -32 -93 -56 -128 -20 ' +\n\t'-32 -47 -83 -59 -115 -12 -32 -37 -77 -56 -100 -19 -23 -50 -65 -69 -94 -19 ' +\n\t'-29 -44 -57 -54 -63 -11 -5 -29 -27 -42 -47 -52 -85 -234 -277 -300 -315 -25 ' +\n\t'-15 -53 -38 -62 -51 -9 -14 -42 -39 -74 -57 -32 -18 -75 -48 -95 -66 -21 -18 ' +\n\t'-59 -44 -85 -58 -26 -13 -72 -40 -100 -59 -35 -24 -78 -41 -128 -52 -47 -11 ' +\n\t'-99 -31 -139 -56 -69 -42 -94 -49 -391 -110 -245 -51 -425 -66 -595 -50 -168 ' +\n\t'16 -230 27 -330 61 -47 16 -123 35 -170 44 -98 17 -123 25 -172 58 -20 14 -71 ' +\n\t'37 -114 53 -44 15 -95 40 -115 56 -20 16 -70 42 -110 59 -40 16 -88 45 -108 ' +\n\t'63 -20 19 -55 46 -78 61 -24 14 -49 35 -55 47 -7 11 -34 33 -60 49 -50 31 -65 ' +\n\t'61 -53 102 4 13 130 147 281 298 236 238 277 283 299 335 15 32 35 71 46 86 ' +\n\t'12 18 19 44 19 76 0 42 -8 63 -53 138 -92 151 11 139 -1207 141 -798 2 -1030 ' +\n\t'0 -1086 -11z\"></path>\\n' +\n\t'</g>\\n' +\n\t'</svg>\\n';\nvar playImage = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 25\" class=\"abcjs-play-svg\">\\n' +\n\t'    <g>\\n' +\n\t'    <polygon points=\"4 0 23 12.5 4 25\"/>\\n' +\n\t'    </g>\\n' +\n\t'</svg>';\nvar pauseImage = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 25\" class=\"abcjs-pause-svg\">\\n' +\n\t'  <g>\\n' +\n\t'    <rect width=\"8.23\" height=\"25\"/>\\n' +\n\t'    <rect width=\"8.23\" height=\"25\" x=\"17\"/>\\n' +\n\t'  </g>\\n' +\n\t'</svg>';\nvar loadingImage = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\" class=\"abcjs-loading-svg\">\\n' +\n\t'    <circle cx=\"50\" cy=\"50\" fill=\"none\" stroke-width=\"20\" r=\"35\" stroke-dasharray=\"160 55\"></circle>\\n' +\n\t'</svg>';\nvar resetImage = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 25\">\\n' +\n\t'  <g>\\n' +\n\t'    <polygon points=\"5 12.5 24 0 24 25\"/>\\n' +\n\t'    <rect width=\"3\" height=\"25\" x=\"0\" y=\"0\"/>\\n' +\n\t'  </g>\\n' +\n\t'</svg>';\n\nfunction CreateSynthControl(parent, options) {\n\tvar self = this;\n\t// parent is either an element or a selector.\n\tif (typeof parent === \"string\") {\n\t\tvar selector = parent;\n\t\tparent = document.querySelector(selector);\n\t\tif (!parent)\n\t\t\tthrow new Error(\"Cannot find element \\\"\" + selector + \"\\\" in the DOM.\");\n\t} else if (!(parent instanceof HTMLElement))\n\t\tthrow new Error(\"The first parameter must be a valid element or selector in the DOM.\");\n\n\tself.parent = parent;\n\tself.options = {};\n\tif (options)\n\t\tself.options = parseCommon.clone(options);\n\n\t// This can be called in the following cases:\n\t// AC already registered and not suspended\n\t// AC already registered and suspended\n\t// AC not registered and not passed in\n\t// AC not registered but passed in (but suspended)\n\t// AC not registered but passed in (not suspended)\n\t// If the AC is already registered, then just use it - ignore what is passed in\n\t// Create the AC if necessary if there isn't one already.\n\t// We don't care right now if the AC is suspended - whenever a button is clicked then we check it.\n\tif (self.options.ac)\n\t\tregisterAudioContext(self.options.ac);\n\tbuildDom(self.parent, self.options);\n\tattachListeners(self);\n\n\tself.setTempo = function(tempo) {\n\t\tvar el = self.parent.querySelector(\".abcjs-midi-current-tempo\");\n\t\tif (el)\n\t\t\tel.innerHTML = tempo;\n\t};\n\tself.resetAll = function() {\n\t\tvar pushedButtons = self.parent.querySelectorAll(\".abcjs-pushed\");\n\t\tfor (var i = 0; i < pushedButtons.length; i++) {\n\t\t\tvar button = pushedButtons[i];\n\t\t\tbutton.classList.remove(\"abcjs-pushed\");\n\t\t}\n\t};\n\tself.pushPlay = function(push) {\n\t\tvar startButton = self.parent.querySelector(\".abcjs-midi-start\");\n\t\tif (!startButton)\n\t\t\treturn;\n\t\tif (push)\n\t\t\tstartButton.classList.add(\"abcjs-pushed\");\n\t\telse\n\t\t\tstartButton.classList.remove(\"abcjs-pushed\");\n\t};\n\tself.pushLoop = function(push) {\n\t\tvar loopButton = self.parent.querySelector(\".abcjs-midi-loop\");\n\t\tif (!loopButton)\n\t\t\treturn;\n\t\tif (push)\n\t\t\tloopButton.classList.add(\"abcjs-pushed\");\n\t\telse\n\t\t\tloopButton.classList.remove(\"abcjs-pushed\");\n\t};\n\n\tself.setProgress = function (percent, totalTime) {\n\t\tvar progressBackground = self.parent.querySelector(\".abcjs-midi-progress-background\");\n\t\tvar progressThumb = self.parent.querySelector(\".abcjs-midi-progress-indicator\");\n\t\tif (!progressBackground || !progressThumb)\n\t\t\treturn;\n\t\tvar width = progressBackground.clientWidth;\n\t\tvar left = width * percent;\n\t\tprogressThumb.style.left = left + \"px\";\n\n\t\tvar clock = self.parent.querySelector(\".abcjs-midi-clock\");\n\t\tif (clock) {\n\t\t\tvar totalSeconds = (totalTime * percent) / 1000;\n\t\t\tvar minutes = Math.floor(totalSeconds / 60);\n\t\t\tvar seconds = Math.floor(totalSeconds % 60);\n\t\t\tvar secondsFormatted = seconds < 10 ? \"0\" + seconds : seconds;\n\t\t\tclock.innerHTML = minutes + \":\" + secondsFormatted;\n\t\t}\n\t};\n\n\tif (self.options.afterResume) {\n\t\tvar isResumed = false;\n\t\tif (self.options.ac) {\n\t\t\tisResumed = self.options.ac.state !== \"suspended\";\n\t\t} else if (activeAudioContext()) {\n\t\t\tisResumed = activeAudioContext().state !== \"suspended\";\n\t\t}\n\t\tif (isResumed)\n\t\t\tself.options.afterResume();\n\t}\n}\n\nfunction buildDom(parent, options) {\n\tvar hasLoop = !!options.loopHandler;\n\tvar hasRestart = !!options.restartHandler;\n\tvar hasPlay = !!options.playHandler || !!options.playPromiseHandler;\n\tvar hasProgress = !!options.progressHandler;\n\tvar hasWarp = !!options.warpHandler;\n\tvar hasClock = options.hasClock !== false;\n\n\tvar html = '<div class=\"abcjs-inline-audio\">\\n';\n\tif (hasLoop) {\n\t\tvar repeatTitle = options.repeatTitle ? options.repeatTitle : \"Click to toggle play once/repeat.\";\n\t\tvar repeatAria = options.repeatAria ? options.repeatAria : repeatTitle;\n\t\thtml += '<button type=\"button\" class=\"abcjs-midi-loop abcjs-btn\" title=\"' + repeatTitle + '\" aria-label=\"' + repeatAria + '\">' + loopImage + '</button>\\n';\n\t}\n\tif (hasRestart) {\n\t\tvar restartTitle = options.restartTitle ? options.restartTitle : \"Click to go to beginning.\";\n\t\tvar restartAria = options.restartAria ? options.restartAria : restartTitle;\n\t\thtml += '<button type=\"button\" class=\"abcjs-midi-reset abcjs-btn\" title=\"' + restartTitle + '\" aria-label=\"' + restartAria + '\">' + resetImage + '</button>\\n';\n\t}\n\tif (hasPlay) {\n\t\tvar playTitle = options.playTitle ? options.playTitle : \"Click to play/pause.\";\n\t\tvar playAria = options.playAria ? options.playAria : playTitle;\n\t\thtml += '<button type=\"button\" class=\"abcjs-midi-start abcjs-btn\" title=\"' + playTitle + '\" aria-label=\"' + playAria + '\">' + playImage + pauseImage + loadingImage + '</button>\\n';\n\t}\n\tif (hasProgress) {\n\t\tvar randomTitle = options.randomTitle ? options.randomTitle : \"Click to change the playback position.\";\n\t\tvar randomAria = options.randomAria ? options.randomAria : randomTitle;\n\t\thtml += '<button type=\"button\" class=\"abcjs-midi-progress-background\" title=\"' + randomTitle + '\" aria-label=\"' + randomAria + '\"><span class=\"abcjs-midi-progress-indicator\"></span></button>\\n';\n\t}\n\tif (hasClock) {\n\t\thtml += '<span class=\"abcjs-midi-clock\"></span>\\n';\n\t}\n\tif (hasWarp) {\n\t\tvar warpTitle = options.warpTitle ? options.warpTitle : \"Change the playback speed.\";\n\t\tvar warpAria = options.warpAria ? options.warpAria : warpTitle;\n\t\tvar bpm = options.bpm ? options.bpm : \"BPM\";\n\t\thtml += '<span class=\"abcjs-tempo-wrapper\"><label><input class=\"abcjs-midi-tempo\" type=\"number\" min=\"1\" max=\"300\" value=\"100\" title=\"' + warpTitle + '\" aria-label=\"' + warpAria + '\">%</label><span>&nbsp;(<span class=\"abcjs-midi-current-tempo\"></span> ' + bpm + ')</span></span>\\n';\n\t}\n\thtml += '</div>\\n';\n\tparent.innerHTML = html;\n}\n\nfunction acResumerMiddleWare(next, ev, playBtn, afterResume, isPromise) {\n\tvar needsInit = true;\n\tif (!activeAudioContext()) {\n\t\tregisterAudioContext();\n\t} else {\n\t\tneedsInit = activeAudioContext().state === \"suspended\";\n\t}\n\tif (!supportsAudio()) {\n\t\tthrow { status: \"NotSupported\", message: \"This browser does not support audio.\"};\n\t}\n\n\tif ((needsInit || isPromise) && playBtn)\n\t\tplayBtn.classList.add(\"abcjs-loading\");\n\n\tif (needsInit) {\n\t\tactiveAudioContext().resume().then(function () {\n\t\t\tif (afterResume) {\n\t\t\t\tafterResume().then(function (response) {\n\t\t\t\t\tdoNext(next, ev, playBtn, isPromise);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tdoNext(next, ev, playBtn, isPromise);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tdoNext(next, ev, playBtn, isPromise);\n\t}\n}\n\nfunction doNext(next, ev, playBtn, isPromise) {\n\tif (isPromise) {\n\t\tnext(ev).then(function() {\n\t\t\tif (playBtn)\n\t\t\t\tplayBtn.classList.remove(\"abcjs-loading\");\n\t\t});\n\t} else {\n\t\tnext(ev);\n\t\tif (playBtn)\n\t\t\tplayBtn.classList.remove(\"abcjs-loading\");\n\t}\n}\n\nfunction attachListeners(self) {\n\tvar hasLoop = !!self.options.loopHandler;\n\tvar hasRestart = !!self.options.restartHandler;\n\tvar hasPlay = !!self.options.playHandler || !!self.options.playPromiseHandler;\n\tvar hasProgress = !!self.options.progressHandler;\n\tvar hasWarp = !!self.options.warpHandler;\n\tvar playBtn = self.parent.querySelector(\".abcjs-midi-start\");\n\n\tif (hasLoop)\n\t\tself.parent.querySelector(\".abcjs-midi-loop\").addEventListener(\"click\", function(ev){acResumerMiddleWare(self.options.loopHandler, ev, playBtn, self.options.afterResume)});\n\tif (hasRestart)\n\t\tself.parent.querySelector(\".abcjs-midi-reset\").addEventListener(\"click\", function(ev){acResumerMiddleWare(self.options.restartHandler, ev, playBtn, self.options.afterResume)});\n\tif (hasPlay)\n\t\tplayBtn.addEventListener(\"click\", function(ev){\n\t\t\tacResumerMiddleWare(\n\t\t\t\tself.options.playPromiseHandler || self.options.playHandler,\n\t\t\t\tev,\n\t\t\t\tplayBtn,\n\t\t\t\tself.options.afterResume,\n\t\t\t\t!!self.options.playPromiseHandler)\n\t\t});\n\tif (hasProgress)\n\t\tself.parent.querySelector(\".abcjs-midi-progress-background\").addEventListener(\"click\", function(ev){acResumerMiddleWare(self.options.progressHandler, ev, playBtn, self.options.afterResume)});\n\tif (hasWarp)\n\t\tself.parent.querySelector(\".abcjs-midi-tempo\").addEventListener(\"change\", function(ev){acResumerMiddleWare(self.options.warpHandler, ev, playBtn, self.options.afterResume)});\n}\nmodule.exports = CreateSynthControl;\n"]},"metadata":{},"sourceType":"script"}