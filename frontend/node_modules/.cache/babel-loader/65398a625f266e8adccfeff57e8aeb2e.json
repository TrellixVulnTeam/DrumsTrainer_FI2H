{"ast":null,"code":"//    abc_create_time_signature.js\n//    Copyright (C) 2010-2018 Gregory Dyke (gregdyke at gmail dot com) and Paul Rosen\n//\n//    Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\n//    documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation\n//    the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and\n//    to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n//\n//    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n//\n//    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING\n//    BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n//    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n//    DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n//    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\nvar AbsoluteElement = require('./abc_absolute_element');\n\nvar glyphs = require('./abc_glyphs');\n\nvar RelativeElement = require('./abc_relative_element');\n\nvar createTimeSignature;\n\n(function () {\n  \"use strict\";\n\n  createTimeSignature = function (elem, tuneNumber) {\n    var abselem = new AbsoluteElement(elem, 0, 10, 'staff-extra', tuneNumber);\n\n    if (elem.type === \"specified\") {\n      var x = 0;\n\n      for (var i = 0; i < elem.value.length; i++) {\n        if (i !== 0) {\n          abselem.addRight(new RelativeElement('+', x + 1, glyphs.getSymbolWidth(\"+\"), 6, {\n            thickness: glyphs.symbolHeightInPitches(\"+\")\n          }));\n          x += glyphs.getSymbolWidth(\"+\") + 2;\n        }\n\n        if (elem.value[i].den) {\n          var numWidth = 0;\n\n          for (var i2 = 0; i2 < elem.value[i].num.length; i2++) numWidth += glyphs.getSymbolWidth(elem.value[i].num.charAt(i2));\n\n          var denWidth = 0;\n\n          for (i2 = 0; i2 < elem.value[i].num.length; i2++) denWidth += glyphs.getSymbolWidth(elem.value[i].den.charAt(i2));\n\n          var maxWidth = Math.max(numWidth, denWidth);\n          abselem.addRight(new RelativeElement(elem.value[i].num, x + (maxWidth - numWidth) / 2, numWidth, 8, {\n            thickness: glyphs.symbolHeightInPitches(elem.value[i].num.charAt(0))\n          }));\n          abselem.addRight(new RelativeElement(elem.value[i].den, x + (maxWidth - denWidth) / 2, denWidth, 4, {\n            thickness: glyphs.symbolHeightInPitches(elem.value[i].den.charAt(0))\n          }));\n          x += maxWidth;\n        } else {\n          var thisWidth = 0;\n\n          for (var i3 = 0; i3 < elem.value[i].num.length; i3++) thisWidth += glyphs.getSymbolWidth(elem.value[i].num.charAt(i3));\n\n          abselem.addRight(new RelativeElement(elem.value[i].num, x, thisWidth, 6, {\n            thickness: glyphs.symbolHeightInPitches(elem.value[i].num.charAt(0))\n          }));\n          x += thisWidth;\n        }\n      }\n    } else if (elem.type === \"common_time\") {\n      abselem.addRight(new RelativeElement(\"timesig.common\", 0, glyphs.getSymbolWidth(\"timesig.common\"), 6, {\n        thickness: glyphs.symbolHeightInPitches(\"timesig.common\")\n      }));\n    } else if (elem.type === \"cut_time\") {\n      abselem.addRight(new RelativeElement(\"timesig.cut\", 0, glyphs.getSymbolWidth(\"timesig.cut\"), 6, {\n        thickness: glyphs.symbolHeightInPitches(\"timesig.cut\")\n      }));\n    } else if (elem.type === \"tempus_imperfectum\") {\n      abselem.addRight(new RelativeElement(\"timesig.imperfectum\", 0, glyphs.getSymbolWidth(\"timesig.imperfectum\"), 6, {\n        thickness: glyphs.symbolHeightInPitches(\"timesig.imperfectum\")\n      }));\n    } else if (elem.type === \"tempus_imperfectum_prolatio\") {\n      abselem.addRight(new RelativeElement(\"timesig.imperfectum2\", 0, glyphs.getSymbolWidth(\"timesig.imperfectum2\"), 6, {\n        thickness: glyphs.symbolHeightInPitches(\"timesig.imperfectum2\")\n      }));\n    } else if (elem.type === \"tempus_perfectum\") {\n      abselem.addRight(new RelativeElement(\"timesig.perfectum\", 0, glyphs.getSymbolWidth(\"timesig.perfectum\"), 6, {\n        thickness: glyphs.symbolHeightInPitches(\"timesig.perfectum\")\n      }));\n    } else if (elem.type === \"tempus_perfectum_prolatio\") {\n      abselem.addRight(new RelativeElement(\"timesig.perfectum2\", 0, glyphs.getSymbolWidth(\"timesig.perfectum2\"), 6, {\n        thickness: glyphs.symbolHeightInPitches(\"timesig.perfectum2\")\n      }));\n    } else {\n      console.log(\"time signature:\", elem);\n    }\n\n    return abselem;\n  };\n})();\n\nmodule.exports = createTimeSignature;","map":{"version":3,"sources":["/home/elad/Desktop/Repos/drums-trainer/frontend/node_modules/react-sheet-music/node_modules/abcjs/src/write/abc_create_time_signature.js"],"names":["AbsoluteElement","require","glyphs","RelativeElement","createTimeSignature","elem","tuneNumber","abselem","type","x","i","value","length","addRight","getSymbolWidth","thickness","symbolHeightInPitches","den","numWidth","i2","num","charAt","denWidth","maxWidth","Math","max","thisWidth","i3","console","log","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAIA,eAAe,GAAGC,OAAO,CAAC,wBAAD,CAA7B;;AACA,IAAIC,MAAM,GAAGD,OAAO,CAAC,cAAD,CAApB;;AACA,IAAIE,eAAe,GAAGF,OAAO,CAAC,wBAAD,CAA7B;;AAEA,IAAIG,mBAAJ;;AAEA,CAAC,YAAW;AACX;;AAEAA,EAAAA,mBAAmB,GAAG,UAASC,IAAT,EAAeC,UAAf,EAA2B;AAChD,QAAIC,OAAO,GAAG,IAAIP,eAAJ,CAAoBK,IAApB,EAAyB,CAAzB,EAA2B,EAA3B,EAA+B,aAA/B,EAA8CC,UAA9C,CAAd;;AACA,QAAID,IAAI,CAACG,IAAL,KAAc,WAAlB,EAA+B;AAC9B,UAAIC,CAAC,GAAG,CAAR;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,IAAI,CAACM,KAAL,CAAWC,MAA/B,EAAuCF,CAAC,EAAxC,EAA4C;AAC3C,YAAIA,CAAC,KAAK,CAAV,EAAa;AACZH,UAAAA,OAAO,CAACM,QAAR,CAAiB,IAAIV,eAAJ,CAAoB,GAApB,EAAyBM,CAAC,GAAC,CAA3B,EAA8BP,MAAM,CAACY,cAAP,CAAsB,GAAtB,CAA9B,EAA0D,CAA1D,EAA6D;AAACC,YAAAA,SAAS,EAAEb,MAAM,CAACc,qBAAP,CAA6B,GAA7B;AAAZ,WAA7D,CAAjB;AACAP,UAAAA,CAAC,IAAIP,MAAM,CAACY,cAAP,CAAsB,GAAtB,IAA2B,CAAhC;AACA;;AACD,YAAIT,IAAI,CAACM,KAAL,CAAWD,CAAX,EAAcO,GAAlB,EAAuB;AACtB,cAAIC,QAAQ,GAAG,CAAf;;AACA,eAAK,IAAIC,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGd,IAAI,CAACM,KAAL,CAAWD,CAAX,EAAcU,GAAd,CAAkBR,MAAxC,EAAgDO,EAAE,EAAlD,EACCD,QAAQ,IAAIhB,MAAM,CAACY,cAAP,CAAsBT,IAAI,CAACM,KAAL,CAAWD,CAAX,EAAcU,GAAd,CAAkBC,MAAlB,CAAyBF,EAAzB,CAAtB,CAAZ;;AACD,cAAIG,QAAQ,GAAG,CAAf;;AACA,eAAKH,EAAE,GAAG,CAAV,EAAaA,EAAE,GAAGd,IAAI,CAACM,KAAL,CAAWD,CAAX,EAAcU,GAAd,CAAkBR,MAApC,EAA4CO,EAAE,EAA9C,EACCG,QAAQ,IAAIpB,MAAM,CAACY,cAAP,CAAsBT,IAAI,CAACM,KAAL,CAAWD,CAAX,EAAcO,GAAd,CAAkBI,MAAlB,CAAyBF,EAAzB,CAAtB,CAAZ;;AACD,cAAII,QAAQ,GAAGC,IAAI,CAACC,GAAL,CAASP,QAAT,EAAmBI,QAAnB,CAAf;AACAf,UAAAA,OAAO,CAACM,QAAR,CAAiB,IAAIV,eAAJ,CAAoBE,IAAI,CAACM,KAAL,CAAWD,CAAX,EAAcU,GAAlC,EAAuCX,CAAC,GAAC,CAACc,QAAQ,GAACL,QAAV,IAAoB,CAA7D,EAAgEA,QAAhE,EAA0E,CAA1E,EAA6E;AAAEH,YAAAA,SAAS,EAAEb,MAAM,CAACc,qBAAP,CAA6BX,IAAI,CAACM,KAAL,CAAWD,CAAX,EAAcU,GAAd,CAAkBC,MAAlB,CAAyB,CAAzB,CAA7B;AAAb,WAA7E,CAAjB;AACAd,UAAAA,OAAO,CAACM,QAAR,CAAiB,IAAIV,eAAJ,CAAoBE,IAAI,CAACM,KAAL,CAAWD,CAAX,EAAcO,GAAlC,EAAuCR,CAAC,GAAC,CAACc,QAAQ,GAACD,QAAV,IAAoB,CAA7D,EAAgEA,QAAhE,EAA0E,CAA1E,EAA6E;AAAEP,YAAAA,SAAS,EAAEb,MAAM,CAACc,qBAAP,CAA6BX,IAAI,CAACM,KAAL,CAAWD,CAAX,EAAcO,GAAd,CAAkBI,MAAlB,CAAyB,CAAzB,CAA7B;AAAb,WAA7E,CAAjB;AACAZ,UAAAA,CAAC,IAAIc,QAAL;AACA,SAXD,MAWO;AACN,cAAIG,SAAS,GAAG,CAAhB;;AACA,eAAK,IAAIC,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGtB,IAAI,CAACM,KAAL,CAAWD,CAAX,EAAcU,GAAd,CAAkBR,MAAxC,EAAgDe,EAAE,EAAlD,EACCD,SAAS,IAAIxB,MAAM,CAACY,cAAP,CAAsBT,IAAI,CAACM,KAAL,CAAWD,CAAX,EAAcU,GAAd,CAAkBC,MAAlB,CAAyBM,EAAzB,CAAtB,CAAb;;AACDpB,UAAAA,OAAO,CAACM,QAAR,CAAiB,IAAIV,eAAJ,CAAoBE,IAAI,CAACM,KAAL,CAAWD,CAAX,EAAcU,GAAlC,EAAuCX,CAAvC,EAA0CiB,SAA1C,EAAqD,CAArD,EAAwD;AAAEX,YAAAA,SAAS,EAAEb,MAAM,CAACc,qBAAP,CAA6BX,IAAI,CAACM,KAAL,CAAWD,CAAX,EAAcU,GAAd,CAAkBC,MAAlB,CAAyB,CAAzB,CAA7B;AAAb,WAAxD,CAAjB;AACAZ,UAAAA,CAAC,IAAIiB,SAAL;AACA;AACD;AACD,KA1BD,MA0BO,IAAIrB,IAAI,CAACG,IAAL,KAAc,aAAlB,EAAiC;AACvCD,MAAAA,OAAO,CAACM,QAAR,CAAiB,IAAIV,eAAJ,CAAoB,gBAApB,EAAsC,CAAtC,EAAyCD,MAAM,CAACY,cAAP,CAAsB,gBAAtB,CAAzC,EAAkF,CAAlF,EAAqF;AAAEC,QAAAA,SAAS,EAAEb,MAAM,CAACc,qBAAP,CAA6B,gBAA7B;AAAb,OAArF,CAAjB;AAEA,KAHM,MAGA,IAAIX,IAAI,CAACG,IAAL,KAAc,UAAlB,EAA8B;AACpCD,MAAAA,OAAO,CAACM,QAAR,CAAiB,IAAIV,eAAJ,CAAoB,aAApB,EAAmC,CAAnC,EAAsCD,MAAM,CAACY,cAAP,CAAsB,aAAtB,CAAtC,EAA4E,CAA5E,EAA+E;AAAEC,QAAAA,SAAS,EAAEb,MAAM,CAACc,qBAAP,CAA6B,aAA7B;AAAb,OAA/E,CAAjB;AACA,KAFM,MAEA,IAAIX,IAAI,CAACG,IAAL,KAAc,oBAAlB,EAAwC;AAC9CD,MAAAA,OAAO,CAACM,QAAR,CAAiB,IAAIV,eAAJ,CAAoB,qBAApB,EAA2C,CAA3C,EAA8CD,MAAM,CAACY,cAAP,CAAsB,qBAAtB,CAA9C,EAA4F,CAA5F,EAA+F;AAAEC,QAAAA,SAAS,EAAEb,MAAM,CAACc,qBAAP,CAA6B,qBAA7B;AAAb,OAA/F,CAAjB;AACA,KAFM,MAEA,IAAIX,IAAI,CAACG,IAAL,KAAc,6BAAlB,EAAiD;AACvDD,MAAAA,OAAO,CAACM,QAAR,CAAiB,IAAIV,eAAJ,CAAoB,sBAApB,EAA4C,CAA5C,EAA+CD,MAAM,CAACY,cAAP,CAAsB,sBAAtB,CAA/C,EAA8F,CAA9F,EAAiG;AAAEC,QAAAA,SAAS,EAAEb,MAAM,CAACc,qBAAP,CAA6B,sBAA7B;AAAb,OAAjG,CAAjB;AACA,KAFM,MAEA,IAAIX,IAAI,CAACG,IAAL,KAAc,kBAAlB,EAAsC;AAC5CD,MAAAA,OAAO,CAACM,QAAR,CAAiB,IAAIV,eAAJ,CAAoB,mBAApB,EAAyC,CAAzC,EAA4CD,MAAM,CAACY,cAAP,CAAsB,mBAAtB,CAA5C,EAAwF,CAAxF,EAA2F;AAAEC,QAAAA,SAAS,EAAEb,MAAM,CAACc,qBAAP,CAA6B,mBAA7B;AAAb,OAA3F,CAAjB;AACA,KAFM,MAEA,IAAIX,IAAI,CAACG,IAAL,KAAc,2BAAlB,EAA+C;AACrDD,MAAAA,OAAO,CAACM,QAAR,CAAiB,IAAIV,eAAJ,CAAoB,oBAApB,EAA0C,CAA1C,EAA6CD,MAAM,CAACY,cAAP,CAAsB,oBAAtB,CAA7C,EAA0F,CAA1F,EAA6F;AAAEC,QAAAA,SAAS,EAAEb,MAAM,CAACc,qBAAP,CAA6B,oBAA7B;AAAb,OAA7F,CAAjB;AACA,KAFM,MAEA;AACNY,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA8BxB,IAA9B;AACA;;AACD,WAAOE,OAAP;AACA,GA7CD;AA8CA,CAjDD;;AAmDAuB,MAAM,CAACC,OAAP,GAAiB3B,mBAAjB","sourcesContent":["//    abc_create_time_signature.js\n//    Copyright (C) 2010-2018 Gregory Dyke (gregdyke at gmail dot com) and Paul Rosen\n//\n//    Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\n//    documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation\n//    the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and\n//    to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n//\n//    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n//\n//    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING\n//    BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n//    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n//    DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n//    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar AbsoluteElement = require('./abc_absolute_element');\nvar glyphs = require('./abc_glyphs');\nvar RelativeElement = require('./abc_relative_element');\n\nvar createTimeSignature;\n\n(function() {\n\t\"use strict\";\n\n\tcreateTimeSignature = function(elem, tuneNumber) {\n\t\tvar abselem = new AbsoluteElement(elem,0,10, 'staff-extra', tuneNumber);\n\t\tif (elem.type === \"specified\") {\n\t\t\tvar x = 0;\n\t\t\tfor (var i = 0; i < elem.value.length; i++) {\n\t\t\t\tif (i !== 0) {\n\t\t\t\t\tabselem.addRight(new RelativeElement('+', x+1, glyphs.getSymbolWidth(\"+\"), 6, {thickness: glyphs.symbolHeightInPitches(\"+\")}));\n\t\t\t\t\tx += glyphs.getSymbolWidth(\"+\")+2;\n\t\t\t\t}\n\t\t\t\tif (elem.value[i].den) {\n\t\t\t\t\tvar numWidth = 0;\n\t\t\t\t\tfor (var i2 = 0; i2 < elem.value[i].num.length; i2++)\n\t\t\t\t\t\tnumWidth += glyphs.getSymbolWidth(elem.value[i].num.charAt(i2));\n\t\t\t\t\tvar denWidth = 0;\n\t\t\t\t\tfor (i2 = 0; i2 < elem.value[i].num.length; i2++)\n\t\t\t\t\t\tdenWidth += glyphs.getSymbolWidth(elem.value[i].den.charAt(i2));\n\t\t\t\t\tvar maxWidth = Math.max(numWidth, denWidth);\n\t\t\t\t\tabselem.addRight(new RelativeElement(elem.value[i].num, x+(maxWidth-numWidth)/2, numWidth, 8, { thickness: glyphs.symbolHeightInPitches(elem.value[i].num.charAt(0)) }));\n\t\t\t\t\tabselem.addRight(new RelativeElement(elem.value[i].den, x+(maxWidth-denWidth)/2, denWidth, 4, { thickness: glyphs.symbolHeightInPitches(elem.value[i].den.charAt(0)) }));\n\t\t\t\t\tx += maxWidth\n\t\t\t\t} else {\n\t\t\t\t\tvar thisWidth = 0;\n\t\t\t\t\tfor (var i3 = 0; i3 < elem.value[i].num.length; i3++)\n\t\t\t\t\t\tthisWidth += glyphs.getSymbolWidth(elem.value[i].num.charAt(i3));\n\t\t\t\t\tabselem.addRight(new RelativeElement(elem.value[i].num, x, thisWidth, 6, { thickness: glyphs.symbolHeightInPitches(elem.value[i].num.charAt(0)) }));\n\t\t\t\t\tx += thisWidth;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (elem.type === \"common_time\") {\n\t\t\tabselem.addRight(new RelativeElement(\"timesig.common\", 0, glyphs.getSymbolWidth(\"timesig.common\"), 6, { thickness: glyphs.symbolHeightInPitches(\"timesig.common\") }));\n\n\t\t} else if (elem.type === \"cut_time\") {\n\t\t\tabselem.addRight(new RelativeElement(\"timesig.cut\", 0, glyphs.getSymbolWidth(\"timesig.cut\"), 6, { thickness: glyphs.symbolHeightInPitches(\"timesig.cut\") }));\n\t\t} else if (elem.type === \"tempus_imperfectum\") {\n\t\t\tabselem.addRight(new RelativeElement(\"timesig.imperfectum\", 0, glyphs.getSymbolWidth(\"timesig.imperfectum\"), 6, { thickness: glyphs.symbolHeightInPitches(\"timesig.imperfectum\") }));\n\t\t} else if (elem.type === \"tempus_imperfectum_prolatio\") {\n\t\t\tabselem.addRight(new RelativeElement(\"timesig.imperfectum2\", 0, glyphs.getSymbolWidth(\"timesig.imperfectum2\"), 6, { thickness: glyphs.symbolHeightInPitches(\"timesig.imperfectum2\") }));\n\t\t} else if (elem.type === \"tempus_perfectum\") {\n\t\t\tabselem.addRight(new RelativeElement(\"timesig.perfectum\", 0, glyphs.getSymbolWidth(\"timesig.perfectum\"), 6, { thickness: glyphs.symbolHeightInPitches(\"timesig.perfectum\") }));\n\t\t} else if (elem.type === \"tempus_perfectum_prolatio\") {\n\t\t\tabselem.addRight(new RelativeElement(\"timesig.perfectum2\", 0, glyphs.getSymbolWidth(\"timesig.perfectum2\"), 6, { thickness: glyphs.symbolHeightInPitches(\"timesig.perfectum2\") }));\n\t\t} else {\n\t\t\tconsole.log(\"time signature:\",elem);\n\t\t}\n\t\treturn abselem;\n\t};\n})();\n\nmodule.exports = createTimeSignature;\n"]},"metadata":{},"sourceType":"script"}